<nb-card status="success">
  <nb-card-header>
    ACTIVITIES (SAMPLES)
  </nb-card-header>
  <nb-card-body>
    <form>
      <div class="row">
        <div class="col-12">
          <form name="myForm" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
            <nb-card status="basic">
              <nb-card-header>Data Filters</nb-card-header>
              <nb-card-body>
                <div class="form-row row">
                  <div class="col-sm-2">Monitoring Location:</div>
                  <div class="col-sm-2">
                    <nb-select fullWidth status="primary" size="small" name="ddlMonLoc" [(selected)]="monlocSelected">
                      <nb-option *ngFor="let monloc of monlocs" [value]="monloc.monlocIdx">
                        {{ monloc.monlocId }}</nb-option>
                    </nb-select>
                  </div>
                  <div class="col-sm-2">Activity Type:</div>
                  <div class="col-sm-2">
                    <nb-select fullWidth status="primary" size="small" name="ddlActType" [(selected)]="actTypeSelected">
                      <nb-option *ngFor="let actType of actTypes" [value]="actType.value">{{ actType.value }}
                      </nb-option>
                    </nb-select>
                  </div>
                  <div class="col-sm-4">
                    <nb-checkbox name="chkDeletedInd" [(checked)]="chkDeletedInd" status="danger">Display Deleted
                      Activities</nb-checkbox>
                  </div>
                </div>

                <div class="form-row row mt-3">
                  <div class="col-sm-2">Date Range:</div>
                  <div class="col-sm-4">
                    <!-- <input nbInput type="text" name="txtStartDate" [nbDatepicker]="txtStartDateModel"
                      [(ngModel)]="txtStartDate" />
                    <nb-datepicker #txtStartDateModel></nb-datepicker> -->
                    <p-calendar appendTo="body" [showIcon]="true" hideOnDateTimeSelect="true" [(ngModel)]="txtStartDate"
                      name="txtStartDate" showTime="true" hourFormat="24" [baseZIndex]="100000">
                    </p-calendar>
                  </div>
                  <div class="col-sm-2">To:</div>
                  <div class="col-sm-4">
                    <!-- <input nbInput type="text" name="txtEndDate" [nbDatepicker]="txtEndDateModel"
                      [(ngModel)]="txtEndDate" />
                    <nb-datepicker #txtEndDateModel></nb-datepicker> -->
                    <p-calendar appendTo="body" [showIcon]="true" hideOnDateTimeSelect="true" [(ngModel)]="txtEndDate"
                      name="txtEndDate" showTime="true" hourFormat="24" [baseZIndex]="100000">
                    </p-calendar>
                  </div>

                </div>
                <div class="form-row row mt-3">
                  <div class="col-sm-2">Project:</div>
                  <div class="col-sm-4">
                    <nb-select fullWidth status="primary" size="small" name="ddlProject" [(selected)]="projectSelected">
                      <nb-option *ngFor="let project of projects" [value]="project.projectIdx">{{ project.projectId }}
                      </nb-option>
                    </nb-select>
                  </div>
                  <div class="col-sm-2">WQX Status:</div>
                  <div class="col-sm-4">
                    <nb-select fullWidth status="primary" size="small" name="ddlWQXStatus"
                      [(selected)]="wqxStatusSelected">
                      <nb-option *ngFor="let wqxStatus of wqxStatuses" [value]="wqxStatus.value">{{ wqxStatus.text }}
                      </nb-option>
                    </nb-select>
                  </div>
                </div>
              </nb-card-body>
              <nb-card-footer>
                <button nbButton status="success" size="tiny" name="applyBtn" type="submit">
                  <nb-icon icon="checkmark-circle-outline"></nb-icon>Apply
                </button>
              </nb-card-footer>
            </nb-card>
          </form>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <p-table [columns]="cols" [value]="_activitySource" [responsive]="true" [resizableColumns]="true"
            [autoLayout]="true">
            <ng-template pTemplate="header" let-columns>
              <tr>
                <th style="width:11em">Edit</th>
                <th *ngFor="let col of columns">
                  {{col.header}}
                </th>
                <th style="width:11em">Send to EPA</th>
              </tr>
            </ng-template>
            <ng-template pTemplate="body" let-rowData let-columns="columns">
              <tr>
                <td style="text-align:center">
                  <div class="row">
                    <div class="col">
                      <button nbButton size="tiny" status="success" (click)="onEditClicked(rowData)" class="mr-2"
                        style="padding: 0px;font-size:1rem;">
                        <nb-icon icon="edit-outline"></nb-icon>
                      </button>
                    </div>
                    <div class="col">
                      <button nbButton size="tiny" status="danger" (click)="onDeleteClicked(rowData)"
                        style="padding: 0px;font-size:1rem;">
                        <nb-icon icon="close-outline"></nb-icon>
                      </button>
                    </div>
                  </div>
                </td>
                <td *ngFor="let col of columns">
                  <span class="ui-column-title ui-column-title-button">
                    <button nbButton size="tiny" status="warning">{{col.header}}</button>
                  </span>
                  {{rowData[col.field]}}
                </td>
                <td>
                  <span class="ui-column-title ui-column-title-button">
                    <button nbButton size="tiny" status="warning">Send to EPA</button>
                  </span>
                  <div class="row">
                    <div class="col">
                      <nb-checkbox [checked]="rowData['wqX_IND']" disabled></nb-checkbox>
                    </div>
                    <div class="col">
                      <div *ngIf="rowData['wqX_IND'] === true">
                        <container-element [ngSwitch]="rowData['wqX_SUBMIT_STATUS']">
                          <some-element *ngSwitchCase="'U'">
                            <nb-icon icon="cloud-upload" class="rotateMe" nbTooltip="Click to view WQX History"
                              nbTooltipStatus="primary" (click)="onSendToEPA(rowData['activitY_IDX'])"></nb-icon>
                          </some-element>
                          <some-element *ngSwitchCase="'N'">
                            <button nbButton size="tiny" status="danger" (click)="onSendToEPA(rowData['activitY_IDX'])"
                              nbTooltip="Click to view WQX History" nbTooltipStatus="primary">
                              <nb-icon icon="alert-triangle"></nb-icon>
                            </button>
                          </some-element>
                          <some-other-element *ngSwitchCase="'Y'">

                            <button nbButton size="tiny" status="success" (click)="onSendToEPA(rowData['activitY_IDX'])"
                              nbTooltip="Click to view WQX History" nbTooltipStatus="primary">
                              <nb-icon icon="checkmark-square-2"></nb-icon>
                            </button>
                          </some-other-element>
                          <!--default case when there are no matches -->
                          <some-element *ngSwitchDefault>
                            <button nbButton size="tiny" status="basic" (click)="onSendToEPA(rowData['activitY_IDX'])"
                              nbTooltip="Click to view WQX History" nbTooltipStatus="primary">
                              <nb-icon icon="eye-outline"></nb-icon>
                            </button>

                          </some-element>
                        </container-element>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="row mt-3">
            <button nbButton (click)="onAddNew()" size="tiny" status="success" class="mr-3">
              <nb-icon icon="plus-square-outline"></nb-icon>Add New
            </button>
            <span class="float-right">
              <button nbButton (click)="exportExcel()" size="tiny" status="info" class="mr-3">
                <nb-icon icon="download-outline"></nb-icon>Excel
              </button>
              <button nbButton (click)="onConfig()" size="tiny" status="info">
                <nb-icon icon="settings-outline"></nb-icon>Config
              </button>
            </span>
          </div>
        </div>
      </div>
    </form>
  </nb-card-body>
  <nb-card-footer></nb-card-footer>